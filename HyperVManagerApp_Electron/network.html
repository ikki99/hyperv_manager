<div class="container">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h1><i class="fas fa-network-wired me-2"></i>网络管理</h1>
        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#createSwitchModal"><i class="fas fa-plus me-1"></i>创建虚拟交换机</button>
    </div>

    <div class="card">
        <div class="card-header">虚拟交换机</div>
        <div class="card-body">
            <table id="vswitches-table" class="table table-hover table-striped">
                <thead class="table-dark">
                    <tr>
                        <th>名称</th>
                        <th>类型</th>
                        <th>备注</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- vSwitch data will be inserted here -->
                </tbody>
            </table>
        </div>
    </div>

    <div class="card mt-4">
        <div class="card-header">NAT 端口映射</div>
        <div class="card-body">
            <p>管理 NAT 网络的端口映射规则。首先，请选择一个 NAT 网络。</p>
            <div id="nat-management-area"></div>
        </div>
    </div>
</div>

<!-- Create Switch Modal (existing) -->
<div class="modal fade" id="createSwitchModal" tabindex="-1" aria-labelledby="createSwitchModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="createSwitchModalLabel">创建新的虚拟交换机</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="create-switch-form">
                    <div class="mb-3">
                        <label for="switch-name" class="form-label">交换机名称</label>
                        <input type="text" class="form-control" id="switch-name" required>
                    </div>
                    <div class="mb-3">
                        <label for="switch-type" class="form-label">交换机类型</label>
                        <select class="form-select" id="switch-type">
                            <option value="Internal">内部 (Internal)</option>
                            <option value="Private">私有 (Private)</option>
                            <option value="External">外部 (External)</option>
                        </select>
                    </div>
                    <div class="mb-3" id="net-adapter-selection" style="display: none;">
                        <label for="net-adapter" class="form-label">物理网络适配器</label>
                        <select class="form-select" id="net-adapter"></select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                <button type="button" class="btn btn-primary" id="confirm-create-switch">创建</button>
            </div>
        </div>
    </div>
</div>

<!-- Port Mapping Modal -->
<div class="modal fade" id="portMappingModal" tabindex="-1" aria-labelledby="portMappingModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="portMappingModalLabel">管理端口映射: <span id="nat-name-title"></span></h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <h6>现有规则</h6>
                <table id="nat-rules-table" class="table table-sm">
                    <thead><tr><th>协议</th><th>外部端口</th><th>内部 IP</th><th>内部端口</th><th>操作</th></tr></thead>
                    <tbody></tbody>
                </table>
                <hr>
                <h6>添加新规则</h6>
                <form id="add-nat-rule-form" class="row g-3 align-items-center">
                    <div class="col-auto"><select class="form-select" id="nat-protocol"><option>TCP</option><option>UDP</option></select></div>
                    <div class="col-auto"><input type="number" class="form-control" id="nat-external-port" placeholder="外部端口"></div>
                    <div class="col-auto"><input type="text" class="form-control" id="nat-internal-ip" placeholder="内部 IP"></div>
                    <div class="col-auto"><input type="number" class="form-control" id="nat-internal-port" placeholder="内部端口"></div>
                    <div class="col-auto"><button type="submit" class="btn btn-primary">添加</button></div>
                </form>
            </div>
        </div>
    </div>
</div>